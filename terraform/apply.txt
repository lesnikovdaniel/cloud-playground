
Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m

Terraform will perform the following actions:

[1m  # yandex_compute_instance.nat-instance[0m will be created
[0m  [32m+[0m[0m resource "yandex_compute_instance" "nat-instance" {
      [32m+[0m[0m created_at                = (known after apply)
      [32m+[0m[0m folder_id                 = (known after apply)
      [32m+[0m[0m fqdn                      = (known after apply)
      [32m+[0m[0m gpu_cluster_id            = (known after apply)
      [32m+[0m[0m hostname                  = (known after apply)
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m maintenance_grace_period  = (known after apply)
      [32m+[0m[0m maintenance_policy        = (known after apply)
      [32m+[0m[0m metadata                  = {
          [32m+[0m[0m "user-data" = <<-EOT
                #cloud-config
                users:
                  - name: ansible
                    groups: sudo
                    shell: /bin/bash
                    sudo: ['ALL=(ALL) NOPASSWD:ALL']
                    ssh-authorized-keys:
                      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDBAcjw2tR9NbRHx8uItN2swKjhjCLB9Cg6qEb86wcKqzYnLq039yYwKNCAjsBlj+5oGeT/ZZR3LU0WMttmvESySkO0J9h69DOn6uz53cCV7ELZ8NKk8iD5XWiyovTIMZGQ8CPP/gtFYsjazaCbaXaTH64jTGtj2SPZHo3UqVnag0vFde6WXfPLkTeF2nH/39uecHVGZMs+Ep37Bl37TWlJ7gABn5jmWJ71Zu+e110AH7iYgYhJ6RV8aeBp88VcKMlyNH7mzwdOD6Gdd3k/FPL6j45vSConYIz8Ow6qlXSKHbdNyHowOjTU3HNP68nfWqEXzyUbNTCgZfwLllB9IKpCCCDBJl8WdjAzSs51UWxnMMixFqwY6m1lSozO+KEsCDzOLwQHMYrzNk/QPKAl5YfZLXvSDKKo8vyS80HQ0rRR+k4ArxSh/WEOo2QgDjM/9FRv+VyZBtlCz4aQ1h/Skg/btPpd5jb4a7S5DtUhV/1Kg78JSI0virLg2kIiLbb7dLc= bldfrstr@fedora
            EOT
        }
      [32m+[0m[0m name                      = "nat-instance"
      [32m+[0m[0m network_acceleration_type = "standard"
      [32m+[0m[0m platform_id               = "standard-v3"
      [32m+[0m[0m service_account_id        = (known after apply)
      [32m+[0m[0m status                    = (known after apply)
      [32m+[0m[0m zone                      = "ru-central1-a"

      [32m+[0m[0m boot_disk {
          [32m+[0m[0m auto_delete = true
          [32m+[0m[0m device_name = (known after apply)
          [32m+[0m[0m disk_id     = (known after apply)
          [32m+[0m[0m mode        = "READ_WRITE"

          [32m+[0m[0m initialize_params {
              [32m+[0m[0m block_size  = (known after apply)
              [32m+[0m[0m description = (known after apply)
              [32m+[0m[0m image_id    = "fd8b88l2b5mnj352lkdk"
              [32m+[0m[0m name        = (known after apply)
              [32m+[0m[0m size        = 15
              [32m+[0m[0m snapshot_id = (known after apply)
              [32m+[0m[0m type        = "network-hdd"
            }
        }

      [32m+[0m[0m network_interface {
          [32m+[0m[0m index              = (known after apply)
          [32m+[0m[0m ip_address         = (known after apply)
          [32m+[0m[0m ipv4               = true
          [32m+[0m[0m ipv6               = (known after apply)
          [32m+[0m[0m ipv6_address       = (known after apply)
          [32m+[0m[0m mac_address        = (known after apply)
          [32m+[0m[0m nat                = true
          [32m+[0m[0m nat_ip_address     = (known after apply)
          [32m+[0m[0m nat_ip_version     = (known after apply)
          [32m+[0m[0m security_group_ids = (known after apply)
          [32m+[0m[0m subnet_id          = (known after apply)
        }

      [32m+[0m[0m resources {
          [32m+[0m[0m core_fraction = 20
          [32m+[0m[0m cores         = 2
          [32m+[0m[0m memory        = 2
        }
    }

[1m  # yandex_compute_instance_group.kubernetes[0m will be created
[0m  [32m+[0m[0m resource "yandex_compute_instance_group" "kubernetes" {
      [32m+[0m[0m created_at          = (known after apply)
      [32m+[0m[0m deletion_protection = false
      [32m+[0m[0m folder_id           = "b1g8ar6d0dnaun4184h0"
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m instances           = (known after apply)
      [32m+[0m[0m name                = "kubernetes-ig"
      [32m+[0m[0m service_account_id  = "aje6ie42n23247kmeknb"
      [32m+[0m[0m status              = (known after apply)

      [32m+[0m[0m allocation_policy {
          [32m+[0m[0m zones = [
              [32m+[0m[0m "ru-central1-a",
            ]
        }

      [32m+[0m[0m deploy_policy {
          [32m+[0m[0m max_creating     = 2
          [32m+[0m[0m max_deleting     = 2
          [32m+[0m[0m max_expansion    = 2
          [32m+[0m[0m max_unavailable  = 2
          [32m+[0m[0m startup_duration = 0
          [32m+[0m[0m strategy         = (known after apply)
        }

      [32m+[0m[0m instance_template {
          [32m+[0m[0m labels      = {
              [32m+[0m[0m "cluster" = "kubernetes"
              [32m+[0m[0m "stage"   = "dev"
            }
          [32m+[0m[0m metadata    = {
              [32m+[0m[0m "user-data" = <<-EOT
                    #cloud-config
                    users:
                      - name: ansible
                        groups: sudo
                        shell: /bin/bash
                        sudo: ['ALL=(ALL) NOPASSWD:ALL']
                        ssh-authorized-keys:
                          - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDBAcjw2tR9NbRHx8uItN2swKjhjCLB9Cg6qEb86wcKqzYnLq039yYwKNCAjsBlj+5oGeT/ZZR3LU0WMttmvESySkO0J9h69DOn6uz53cCV7ELZ8NKk8iD5XWiyovTIMZGQ8CPP/gtFYsjazaCbaXaTH64jTGtj2SPZHo3UqVnag0vFde6WXfPLkTeF2nH/39uecHVGZMs+Ep37Bl37TWlJ7gABn5jmWJ71Zu+e110AH7iYgYhJ6RV8aeBp88VcKMlyNH7mzwdOD6Gdd3k/FPL6j45vSConYIz8Ow6qlXSKHbdNyHowOjTU3HNP68nfWqEXzyUbNTCgZfwLllB9IKpCCCDBJl8WdjAzSs51UWxnMMixFqwY6m1lSozO+KEsCDzOLwQHMYrzNk/QPKAl5YfZLXvSDKKo8vyS80HQ0rRR+k4ArxSh/WEOo2QgDjM/9FRv+VyZBtlCz4aQ1h/Skg/btPpd5jb4a7S5DtUhV/1Kg78JSI0virLg2kIiLbb7dLc= bldfrstr@fedora
                EOT
            }
          [32m+[0m[0m platform_id = "standard-v1"

          [32m+[0m[0m boot_disk {
              [32m+[0m[0m device_name = (known after apply)
              [32m+[0m[0m mode        = "READ_WRITE"

              [32m+[0m[0m initialize_params {
                  [32m+[0m[0m image_id    = "fd8b88l2b5mnj352lkdk"
                  [32m+[0m[0m size        = 15
                  [32m+[0m[0m snapshot_id = (known after apply)
                  [32m+[0m[0m type        = "network-hdd"
                }
            }

          [32m+[0m[0m network_interface {
              [32m+[0m[0m ip_address         = (known after apply)
              [32m+[0m[0m ipv4               = true
              [32m+[0m[0m ipv6               = (known after apply)
              [32m+[0m[0m ipv6_address       = (known after apply)
              [32m+[0m[0m nat                = (known after apply)
              [32m+[0m[0m network_id         = "enp0h3kbj4fj21fulo5d"
              [32m+[0m[0m security_group_ids = (known after apply)
              [32m+[0m[0m subnet_ids         = [
                  [32m+[0m[0m "e2lmi0p9ebfjmk3nfqmf",
                  [32m+[0m[0m "e9bcte9c180bm7qqfrb5",
                ]
            }

          [32m+[0m[0m network_settings {
              [32m+[0m[0m type = "STANDARD"
            }

          [32m+[0m[0m resources {
              [32m+[0m[0m core_fraction = 100
              [32m+[0m[0m cores         = 4
              [32m+[0m[0m memory        = 8
            }
        }

      [32m+[0m[0m scale_policy {
          [32m+[0m[0m fixed_scale {
              [32m+[0m[0m size = 6
            }
        }
    }

[1m  # yandex_vpc_route_table.nat-instance-route[0m will be created
[0m  [32m+[0m[0m resource "yandex_vpc_route_table" "nat-instance-route" {
      [32m+[0m[0m created_at = (known after apply)
      [32m+[0m[0m folder_id  = (known after apply)
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m labels     = (known after apply)
      [32m+[0m[0m name       = "nat-instance-route"
      [32m+[0m[0m network_id = "enp0h3kbj4fj21fulo5d"

      [32m+[0m[0m static_route {
          [32m+[0m[0m destination_prefix = "0.0.0.0/0"
          [32m+[0m[0m next_hop_address   = (known after apply)
        }
    }

[1m  # yandex_vpc_security_group.nat-instance-sg[0m will be created
[0m  [32m+[0m[0m resource "yandex_vpc_security_group" "nat-instance-sg" {
      [32m+[0m[0m created_at = (known after apply)
      [32m+[0m[0m folder_id  = (known after apply)
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m labels     = (known after apply)
      [32m+[0m[0m name       = "nat-instance-sg"
      [32m+[0m[0m network_id = "enp0h3kbj4fj21fulo5d"
      [32m+[0m[0m status     = (known after apply)

      [32m+[0m[0m egress {
          [32m+[0m[0m description    = "any"
          [32m+[0m[0m from_port      = -1
          [32m+[0m[0m id             = (known after apply)
          [32m+[0m[0m labels         = (known after apply)
          [32m+[0m[0m port           = -1
          [32m+[0m[0m protocol       = "ANY"
          [32m+[0m[0m to_port        = -1
          [32m+[0m[0m v4_cidr_blocks = [
              [32m+[0m[0m "0.0.0.0/0",
            ]
          [32m+[0m[0m v6_cidr_blocks = []
        }

      [32m+[0m[0m ingress {
          [32m+[0m[0m description    = "ext-http"
          [32m+[0m[0m from_port      = -1
          [32m+[0m[0m id             = (known after apply)
          [32m+[0m[0m labels         = (known after apply)
          [32m+[0m[0m port           = 80
          [32m+[0m[0m protocol       = "TCP"
          [32m+[0m[0m to_port        = -1
          [32m+[0m[0m v4_cidr_blocks = [
              [32m+[0m[0m "0.0.0.0/0",
            ]
          [32m+[0m[0m v6_cidr_blocks = []
        }
      [32m+[0m[0m ingress {
          [32m+[0m[0m description    = "ext-https"
          [32m+[0m[0m from_port      = -1
          [32m+[0m[0m id             = (known after apply)
          [32m+[0m[0m labels         = (known after apply)
          [32m+[0m[0m port           = 443
          [32m+[0m[0m protocol       = "TCP"
          [32m+[0m[0m to_port        = -1
          [32m+[0m[0m v4_cidr_blocks = [
              [32m+[0m[0m "0.0.0.0/0",
            ]
          [32m+[0m[0m v6_cidr_blocks = []
        }
      [32m+[0m[0m ingress {
          [32m+[0m[0m description    = "ssh"
          [32m+[0m[0m from_port      = -1
          [32m+[0m[0m id             = (known after apply)
          [32m+[0m[0m labels         = (known after apply)
          [32m+[0m[0m port           = 22
          [32m+[0m[0m protocol       = "TCP"
          [32m+[0m[0m to_port        = -1
          [32m+[0m[0m v4_cidr_blocks = [
              [32m+[0m[0m "0.0.0.0/0",
            ]
          [32m+[0m[0m v6_cidr_blocks = []
        }
    }

[1m  # yandex_vpc_subnet.private-subnet[0m will be created
[0m  [32m+[0m[0m resource "yandex_vpc_subnet" "private-subnet" {
      [32m+[0m[0m created_at     = (known after apply)
      [32m+[0m[0m folder_id      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m labels         = (known after apply)
      [32m+[0m[0m name           = "private-subnet"
      [32m+[0m[0m network_id     = "enp0h3kbj4fj21fulo5d"
      [32m+[0m[0m route_table_id = (known after apply)
      [32m+[0m[0m v4_cidr_blocks = [
          [32m+[0m[0m "192.168.2.0/24",
        ]
      [32m+[0m[0m v6_cidr_blocks = (known after apply)
      [32m+[0m[0m zone           = "ru-central1-a"
    }

[1m  # yandex_vpc_subnet.public-subnet[0m will be created
[0m  [32m+[0m[0m resource "yandex_vpc_subnet" "public-subnet" {
      [32m+[0m[0m created_at     = (known after apply)
      [32m+[0m[0m folder_id      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m labels         = (known after apply)
      [32m+[0m[0m name           = "public-subnet"
      [32m+[0m[0m network_id     = "enp0h3kbj4fj21fulo5d"
      [32m+[0m[0m v4_cidr_blocks = [
          [32m+[0m[0m "192.168.1.0/24",
        ]
      [32m+[0m[0m v6_cidr_blocks = (known after apply)
      [32m+[0m[0m zone           = "ru-central1-a"
    }

[1mPlan:[0m 6 to add, 0 to change, 0 to destroy.
[0m
Changes to Outputs:
  [32m+[0m[0m compute_instance_nat-instance = (known after apply)
[0m[1myandex_vpc_subnet.public-subnet: Creating...[0m[0m
[0m[1myandex_vpc_security_group.nat-instance-sg: Creating...[0m[0m
[0m[1myandex_vpc_subnet.public-subnet: Creation complete after 1s [id=e9bqjc9ku3rm8c1ambcd][0m
[0m[1myandex_vpc_security_group.nat-instance-sg: Creation complete after 2s [id=enpk9as97shuvndcdnik][0m
[0m[1myandex_compute_instance.nat-instance: Creating...[0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Creating...[0m[0m
[0m[1myandex_compute_instance.nat-instance: Still creating... [10s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [10s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [20s elapsed][0m[0m
[0m[1myandex_compute_instance.nat-instance: Still creating... [20s elapsed][0m[0m
[0m[1myandex_compute_instance.nat-instance: Still creating... [30s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [30s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [40s elapsed][0m[0m
[0m[1myandex_compute_instance.nat-instance: Still creating... [40s elapsed][0m[0m
[0m[1myandex_compute_instance.nat-instance: Still creating... [50s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [50s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [1m0s elapsed][0m[0m
[0m[1myandex_compute_instance.nat-instance: Still creating... [1m0s elapsed][0m[0m
[0m[1myandex_compute_instance.nat-instance: Creation complete after 1m4s [id=fhmnhh96baetglc464le][0m
[0m[1myandex_vpc_route_table.nat-instance-route: Creating...[0m[0m
[0m[1myandex_vpc_route_table.nat-instance-route: Creation complete after 1s [id=enp4ie2fcobrjuccs9bm][0m
[0m[1myandex_vpc_subnet.private-subnet: Creating...[0m[0m
[0m[1myandex_vpc_subnet.private-subnet: Creation complete after 1s [id=e9bs8m4aoa9fvqq7jpck][0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [1m10s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [1m20s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [1m30s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [1m40s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [1m50s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [2m0s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [2m10s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [2m20s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Still creating... [2m30s elapsed][0m[0m
[0m[1myandex_compute_instance_group.kubernetes: Creation complete after 2m40s [id=cl1lfksj7umqpdkmvb40][0m
[0m[1m[32m
Apply complete! Resources: 6 added, 0 changed, 0 destroyed.
[0m[0m[1m[32m
Outputs:

[0mcompute_instance_nat-instance = "51.250.65.73"
